index.html

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>mirror_fake Lite</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="mirror_fake Lite">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
  <script src="exif-js.min.js"></script>
  <script src="exif-stripper.js"></script>
  <script src="script.js" defer></script>
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f0f0f0; }
    #preview { max-width: 300px; margin-top: 1em; }
    .safe { color: green; font-weight: bold; }
    .danger { color: red; font-weight: bold; }
    ul { padding-left: 1.2em; }
    li { margin-bottom: 0.5em; }
    details summary { cursor: pointer; font-weight: bold; }
    #download { display: block; margin-top: 1em; }
  </style>
</head>
<body>
  <h1>🪞 mirror_fake Lite</h1>

  <input type="file" id="upload" accept="image/*"><br>
  <img id="preview"><br>

  <h2>🧠 フェイク分析スコア</h2>
  <p id="score"></p>

  <h2>🔍 加工解析の根拠</h2>
  <div id="info"></div>

  <button id="cleanBtn">Exif削除して安全化</button>
  <a id="download" style="display:none;">安全な画像をダウンロード</a>
</body>
</html>

service-worker.js

const CACHE_NAME = 'mirror_fake_cache_v1';
const urlsToCache = [
  './',
  './index.html',
  './script.js',
  './exif-stripper.js',
  './exif-js.min.js',
  './manifest.json'
];

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request).then(response => response || fetch(event.request))
  );
});
